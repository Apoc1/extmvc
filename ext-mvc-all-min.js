ExtMVC=Ext.extend(Ext.util.Observable,{version:"0.6a1",constructor:function(){ExtMVC.superclass.constructor.apply(this,arguments);this.addEvents("environment-changed");this.getEnvSettings=this.getCurrentEnvironmentSettings},setup:function(B){this.app=new ExtMVC.App(B);this.name=this.app.name},controllers:{},registerController:function(B,C){this.controllers[B]=C},getController:function(B){var C=this.controllers[B];if(C){if(typeof C==="function"){this.controllers[B]=new this.controllers[B]()}return this.controllers[B]}else{return null}},currentEnvironment:"production",environments:{production:{}},setCurrentEnvironment:function(B){if(this.getEnvironmentSettings(B)){this.currentEnvironment=B;this.fireEvent("environment-changed",B,this.getEnvironmentSettings(B))}},getCurrentEnvironment:function(){return ExtMVC.currentEnvironment},getCurrentEnvironmentSettings:function(){return this.getEnvironmentSettings(this.getCurrentEnvironment())},addEnvironmentSettings:function(C,B){ExtMVC.environments[C]=ExtMVC.environments[C]||{};Ext.apply(ExtMVC.environments[C],B)},getEnvironmentSettings:function(B){B=B||ExtMVC.environment;return ExtMVC.environments[B]}});ExtMVC=new ExtMVC();Ext.ns("ExtMVC.Model","ExtMVC.plugin","ExtMVC.view","ExtMVC.view.scaffold","ExtMVC.lib");ExtMVC.App=Ext.extend(Ext.util.Observable,{constructor:function(B){ExtMVC.App.superclass.constructor.apply(this,arguments);Ext.apply(this,B||{});window[this.name]=this;this.initializeNamespaces();Ext.onReady(function(){if(this.fireEvent("before-launch",this)){this.initializeRouter();this.initializeEvents();if(this.usesHistory){this.initializeHistory()}this.launch();this.fireEvent("launched",this);if(this.usesHistory&&this.dispatchHistoryOnLoad){Ext.History.init(function(D){var C=document.location.hash.replace("#","");var E=this.router.recognise(C);if(E){this.dispatch(E)}},this)}else{Ext.History.init()}}},this)},name:"MyApp",usesHistory:false,dispatchHistoryOnLoad:true,launch:Ext.emptyFn,params:{},dispatch:function(C,D,B){var C=C||{};Ext.applyIf(C,{action:"index"});this.params=C;var F=ExtMVC.getController(C.controller);if(F!=undefined){var E=F[C.action];if(typeof E=="function"){E.apply(D||F,B||[])}else{throw new Error(String.format("Action '{0}' not found on Controller '{1}'",C.action,C.controller))}}},initializeRouter:function(){if(this.router){return}this.router=new ExtMVC.Router();ExtMVC.Router.defineRoutes(this.router)},name:undefined,initializeNamespaces:function(B){var B=B||this.name;if(B){Ext.ns(B,B+".controllers",B+".models",B+".views")}},initializeHistory:function(){this.historyForm=Ext.getBody().createChild({tag:"form",action:"#",cls:"x-hidden",id:"history-form",children:[{tag:"div",children:[{tag:"input",id:"x-history-field",type:"hidden"},{tag:"iframe",id:"x-history-frame"}]}]});Ext.History.on("change",this.onHistoryChange,this)},onHistoryChange:function(C){var B=this.router.recognise(C);if(B){this.dispatch(B,null,[{url:C}])}},initializeEvents:function(){this.addEvents("before-launch","launched")}});ExtMVC.Inflector={Inflections:{plural:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/s$/i),"s"],[(/$/),"s"]],singular:[[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/s$/i),""]],irregular:[["move","moves"],["sex","sexes"],["child","children"],["man","men"],["person","people"]],uncountable:["sheep","fish","series","species","money","rice","information","equipment"]},ordinalize:function(B){if(11<=parseInt(B,10)%100&&parseInt(B,10)%100<=13){return B+"th"}else{switch(parseInt(B,10)%10){case 1:return B+"st";case 2:return B+"nd";case 3:return B+"rd";default:return B+"th"}}},pluralize:function(D){var F=ExtMVC.Inflector.uncountableOrIrregular(D);if(F){return F}for(var B=0;B<ExtMVC.Inflector.Inflections.plural.length;B++){var C=ExtMVC.Inflector.Inflections.plural[B][0];var E=ExtMVC.Inflector.Inflections.plural[B][1];if(C.test(D)){return D.replace(C,E)}}return D},singularize:function(D){var F=ExtMVC.Inflector.uncountableOrIrregular(D);if(F){return F}for(var B=0;B<ExtMVC.Inflector.Inflections.singular.length;B++){var C=ExtMVC.Inflector.Inflections.singular[B][0];var E=ExtMVC.Inflector.Inflections.singular[B][1];if(C.test(D)){return D.replace(C,E)}}return D},uncountableOrIrregular:function(F){for(var D=0;D<ExtMVC.Inflector.Inflections.uncountable.length;D++){var C=ExtMVC.Inflector.Inflections.uncountable[D];if(F.toLowerCase==C){return C}}for(var D=0;D<ExtMVC.Inflector.Inflections.irregular.length;D++){var E=ExtMVC.Inflector.Inflections.irregular[D][0];var B=ExtMVC.Inflector.Inflections.irregular[D][1];if((F.toLowerCase==E)||(F==B)){return B}}return false}};Array.prototype.toSentence=function(B){B=B||"and";var D="";if(this.length<=1){D=this[0]}else{var C=this.slice(0,this.length-1);D=String.format("{0} {1} {2}",C.join(", "),B,this[this.length-1])}return D};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()};String.prototype.titleize=function(){return this.replace(/\w\S*/g,function(B){return B.charAt(0).toUpperCase()+B.substr(1).toLowerCase()})};String.prototype.camelize=function(){return this.replace(/_/g," ").titleize().replace(/ /g,"")};String.prototype.underscore=function(){return this.replace(/([A-Z])/g,"_$1").toLowerCase().replace(/ /g,"_").replace(/^_/,"")};String.prototype.singularize=function(){return ExtMVC.Inflector.singularize(this)};String.prototype.pluralize=function(){return ExtMVC.Inflector.pluralize(this)};String.prototype.humanize=function(){return this.underscore().replace(/_/g," ")};String.prototype.escapeHTML=function(){return this.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};String.prototype.toCurrency=function(I){if(typeof(I)=="undefined"){var I="$"}var C=this.split(".")[0],G=this.split(".")[1];var B=Math.floor(C.length/3);var F=C.length%3,H=F;var D=F==0?[]:[C.substr(0,F)];for(var E=0;E<B;E++){D.push(C.substr(F+(E*3),3))}C=I+D.join(",");return G?String.format("{0}.{1}",C,G):C};ExtMVC.Router=function(){};ExtMVC.Router.prototype={mappings:[],namedRoutes:{},connect:function(C,D){var B=new ExtMVC.Route(C,D);this.mappings.push(B);return B},name:function(B,C,D){this.namedRoutes[B]=this.connect(C,D)},root:function(B){var B=B||{};this.connect("",Ext.applyIf(B,{action:"index"}))},resources:function(B,J){if(arguments[1]&&typeof(arguments[1])=="string"){var I=arguments[arguments.length-1];var C=(typeof(I)=="object")?I:{};for(var D=0;D<arguments.length;D++){if(!(I===arguments[D]&&typeof(I)=="object")){this.resources(arguments[D],C)}}return}var H=String.format("{0}_path",B.pluralize());var F=String.format("new_{0}_path",B.singularize());var G=String.format("{0}_path",B.singularize());var E=String.format("edit_{0}_path",B.singularize());this.name(H,B,Ext.apply({},{controller:B,action:"index"}));this.name(F,B+"/new",Ext.apply({},{controller:B,action:"new"}));this.name(G,B+"/:id",Ext.apply({},{controller:B,action:"show",conditions:{":id":"[0-9]+"}}));this.name(E,B+"/:id/edit",Ext.apply({},{controller:B,action:"edit",conditions:{":id":"[0-9]+"}}))},redirectTo:function(){var B=this.urlFor.apply(this,arguments);if(B){Ext.History.add(B);return true}else{return false}},linkTo:function(C,B){var B=B||{};var D=this.urlFor(C);if(D){return Ext.applyIf(B,{url:D,cls:[C.controller,C.action,C.id].join("-").replace("--","-").replace(/-$/,""),text:this.constructDefaultLinkToName(C,B),handler:function(){Ext.History.add(D)}})}else{throw new Error("No match for that url specification")}},constructDefaultLinkToName:function(C,B){if(!C||!C.controller||!C.action){return""}var B=B||{};Ext.applyIf(B,{singularName:C.controller.singularize()});var D=C.action.titleize();if(D=="Index"){return"Show "+C.controller.titleize()}else{return D+" "+B.singularName.titleize()}},recognise:function(D){for(var E=0;E<this.mappings.length;E++){var B=this.mappings[E];var C=B.matchesFor(D);if(C){return C}}return false},urlFor:function(E,C){var B;if(typeof(E)=="string"){if(B=this.namedRoutes[E]){var C=C||{};if(typeof(C)=="number"){C={id:C}}if(C.data&&C.data.id){C={id:C.data.id}}return B.urlForNamed(C)}}else{for(var F=0;F<this.mappings.length;F++){B=this.mappings[F];var D=B.urlFor(E);if(D){return D}}}return false},withOptions:function(C,B){var C=C||{};var E=this;var D={};D.prototype=this;Ext.apply(D,{connect:function(F,G){var G=G||{};Ext.applyIf(G,C);E.connect.call(E,F,G)},name:function(F,G,H){var H=H||{};Ext.applyIf(H,C);E.name.call(E,F,G,H)}});B.call(this,D)}};ExtMVC.Router.defineRoutes=function(B){B.connect(":controller/:action");B.connect(":controller/:action/:id")};ExtMVC.Route=function(D,B){this.mappingString=D;this.options=B||{};this.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);this.paramsInMatchString=this.mappingString.match(this.paramMatchingRegex)||[];this.paramsInStringWithOptions=[];this.conditions=this.options.conditions||{};if(this.options.conditions){delete this.options.conditions}for(var C=0;C<this.paramsInMatchString.length;C++){this.paramsInStringWithOptions.push(this.paramsInMatchString[C])}for(var E in B){this.paramsInStringWithOptions.push(":"+E)}this.matcherRegex=this.convertToUsableRegex(D)};ExtMVC.Route.prototype={recognises:function(B){return this.matcherRegex.test(B)},matchesFor:function(C){if(!this.recognises(C)){return false}var F={};var E=this.paramsInMatchString;var B=C.match(this.matcherRegex);B.shift();for(var D=E.length-1;D>=0;D--){F[E[D].replace(":","")]=B[D]}for(option in this.options){F[option]=this.options[option]}return F},urlForNamed:function(B){var B=B||{};return this.urlFor(Ext.applyIf(B,this.options))},urlFor:function(D){var C=this.mappingString;for(var G in D){if(D[G]&&this.options[G]&&D[G]!=this.options[G]){return false}}var F=[];for(var G in D){F.push(":"+G)}F=F.sort();var B=this.paramsInStringWithOptions.sort();if(B.length!=F.length){return false}for(var E=0;E<F.length;E++){if(F[E]!=B[E]){return false}}for(var G in D){C=C.replace(":"+G,D[G])}return C},convertToUsableRegex:function(B){var F=this.paramsInMatchString;for(var C=F.length-1;C>=0;C--){var D=this.conditions[F[C]];var E=String.format("({0})",D||"[a-zA-Z0-9_,]+");B=B.replace(new RegExp(F[C]),E)}return new RegExp("^"+B+"$")}};ExtMVC.lib.Dependencies=Ext.extend(Ext.util.Observable,{constructor:function(){this.dependencies={};ExtMVC.lib.Dependencies.superclass.constructor.apply(this,arguments)},get:function(B){return this.dependencies[B]||[]},add:function(E,D,C){var B=this.dependencies[E]||[];B.push({name:D,config:C});this.dependencies[E]=B}});ExtMVC.Controller=Ext.extend(Ext.util.Observable,{name:null,onExtended:function(){if(this.name!=null){this.viewsPackage=Ext.ns(String.format("{0}.views.{1}",ExtMVC.name,this.name));ExtMVC.registerController(this.name,this.constructor)}},constructor:function(B){ExtMVC.Controller.superclass.constructor.apply(this,arguments);Ext.apply(this,B||{});this.initEvents();this.initListeners()},initEvents:Ext.emptyFn,initListeners:Ext.emptyFn,showNotice:function(B){console.log(B)},getViewClass:function(B){return this.viewsPackage[B]},addTo:null,render:function(E,C){var D=this.getViewClass(E);if(typeof D=="function"){var B=new D(C);if(this.addTo){this.renderViaAddTo(B)}return B}else{throw new Error(String.format("View '{0}' not found",E))}},renderViaAddTo:function(B){if(this.addTo!=undefined){this.addTo.removeAll();this.addTo.doLayout();this.addTo.add(B);this.addTo.doLayout()}}});Ext.reg("controller",ExtMVC.Controller);ExtMVC.CrudController=Ext.extend(ExtMVC.Controller,{model:null,create:function(D,C){var B=new this.model(D);B.save({scope:this,success:this.onCreateSuccess,failure:this.onCreateFailure})},read:function(B){this.model.findById(B,{scope:this,success:function(C){this.fireEvent("read",C)},failure:function(){this.fireEvent("read-failed",B)}})},update:function(B,D){for(var C in D){B.set(C,D[C])}B.save({scope:this,success:function(E){this.onUpdateSuccess(E,D)},failure:function(){this.onUpdateFailure(B,D)}})},destroy:function(B){B.destroy({scope:this,success:function(){this.fireEvent("delete",B)},failure:function(){this.fireEvent("delete-failed",B)}})},index:function(){var B=this.render("Index",{model:this.model,controller:this,listeners:this.getIndexViewListeners(),viewsPackage:this.viewsPackage});this.fireEvent("index");return B},build:function(){this.render("New",{model:this.model,controller:this,listeners:this.getBuildViewListeners(),viewsPackage:this.viewsPackage})},edit:function(B){if(B instanceof Ext.data.Record){this.render("Edit",{model:this.model,controller:this,listeners:this.getEditViewListeners(),viewsPackage:this.viewsPackage}).loadRecord(B);this.fireEvent("edit",B)}else{var C=B;this.model.find(C,{scope:this,success:function(D){this.edit(D)}})}},getIndexViewListeners:function(){return{scope:this,"delete":this.destroy,"new":this.build,edit:this.edit}},getEditViewListeners:function(){return{scope:this,cancel:this.index,save:this.update}},getBuildViewListeners:function(){return{scope:this,cancel:this.index,save:this.create}},showCreatedNotice:function(){this.showNotice(String.format("{0} successfully created",this.model.prototype.singularHumanName))},showUpdatedNotice:function(){this.showNotice(String.format("{0} successfully updated",this.model.prototype.singularHumanName))},onCreateSuccess:function(B){if(this.fireEvent("create",B)!==false){this.showCreatedNotice();this.index()}},onCreateFailure:function(B){this.fireEvent("create-failed",B)},onUpdateSuccess:function(B,C){if(this.fireEvent("update",B,C)!==false){this.showUpdatedNotice();this.index()}},onUpdateFailure:function(B,C){this.fireEvent("update-failed",B,C)},initEvents:function(){this.addEvents("create","create-failed","read","read-failed","update","update-failed","delete","delete-failed","index","edit")},getViewClass:function(C){var B=ExtMVC.CrudController.superclass.getViewClass.call(this,C);return(B==undefined)?this.scaffoldViewName(C):B},scaffoldViewName:function(B){return ExtMVC.view.scaffold[B.titleize()]}});ExtMVC.OS=function(B){ExtMVC.OS.superclass.constructor.call(this,B);this.addEvents("beforelaunch","launch");this.initialiseNamespaces();var C=this;ExtMVC.OS.getOS=function(){return C}};Ext.extend(ExtMVC.OS,ExtMVC.Controller,{registerController:function(B,C){this.controllers[B]=C},getController:function(B){var C=this.controllers[B];if(C){if(typeof C==="function"){this.controllers[B]=new this.controllers[B]()}return this.controllers[B]}else{return null}},controllers:{},launch:function(){if(this.fireEvent("beforelaunch",this)){this.initializeRouter();this.initializeViewport();if(this.usesHistory){this.initialiseHistory()}this.onLaunch();this.fireEvent("launch",this)}},usesHistory:false,dispatchHistoryOnLoad:true,viewportBuilder:"leftmenu",viewportBuilderConfig:{},initializeViewport:function(){var B=ExtMVC.ViewportBuilderManager.find(this.viewportBuilder);if(B){B.build(this)}},params:{},dispatch:function(C,D,B){var C=C||{};Ext.applyIf(C,{action:"index"});this.params=C;var E;if(E=this.getController(C.controller)){E.fireAction(C.action,D||E,B||[])}},onLaunch:Ext.emptyFn,initializeRouter:function(){if(this.router){return}this.router=new ExtMVC.Router();ExtMVC.Router.defineRoutes(this.router)},name:undefined,initialiseNamespaces:function(B){var B=B||this.name;if(B){Ext.ns(B,B+".controllers",B+".models",B+".views")}},initialiseHistory:function(){this.historyForm=Ext.getBody().createChild({tag:"form",action:"#",cls:"x-hidden",id:"history-form",children:[{tag:"div",children:[{tag:"input",id:"x-history-field",type:"hidden"},{tag:"iframe",id:"x-history-frame"}]}]});if(this.dispatchHistoryOnLoad){Ext.History.init(function(C){var B=document.location.hash.replace("#","");var D=this.router.recognise(B);if(D){this.dispatch(D)}},this)}else{Ext.History.init()}Ext.History.on("change",this.handleHistoryChange,this)},handleHistoryChange:function(C){var B=this.router.recognise(C);if(B){this.dispatch(B,null,[{url:C}])}},setsTitle:function(B,C){var C=C||B.title||B.initialConfig?B.initialConfig.title:null;if(C){B.on("show",function(){document.title=C});B.on("activate",function(){document.title=C})}}});Ext.reg("os",ExtMVC.OS);ExtMVC.Model=function(){return{pendingCreation:{},getModelsPendingDefinitionOf:function(B){return this.pendingCreation[B]||[]},setModelPendingDefinitionOf:function(C,E,D){var B=this.pendingCreation[C]||[];B.push({name:E,config:D});this.pendingCreation[C]=B},strictMode:false,modelNamespace:window,define:function(B,C){var E=true,C=C||{};if(typeof C.extend!="undefined"){var D=this.modelNamespace[C.extend];if(typeof D=="undefined"){E=false;this.setModelPendingDefinitionOf(C.extend,B,C)}}if(E){this.create.apply(this,arguments)}},create:function(C,E){E=E||{};if(this.isAlreadyDefined(C)){if(this.strictMode){throw new Error(C+" is already defined")}return false}var F=this.modelNamespace[E.extend];var B=this.buildFields(E.fields,F);delete E.fields;var D=this.modelNamespace[C]=Ext.data.Record.create(B);var G=E.classMethods||{};delete E.classMethods;Ext.apply(D.prototype,E);if(typeof F!="undefined"){Ext.applyIf(G,F);Ext.applyIf(D.prototype,F.prototype)}D.prototype.modelName=C;this.setupNames(D);for(methodName in G){if(methodName!="prototype"){D[methodName]=G[methodName]}}this.initializePlugins(D);this.afterCreate(C)},afterCreate:function(B){var C=this.getModelsPendingDefinitionOf(B);if(C){Ext.each(C,function(D){this.create(D.name,D.config)},this)}},isAlreadyDefined:function(B){if(typeof this.modelNamespace[B]!="undefined"){return true}var D=false;for(superclass in this.pendingCreation){var C=this.pendingCreation[superclass];Ext.each(C,function(E){if(E.name==B){D=true}},this)}return D},buildFields:function(C,D){C=C||[];var B=new Ext.util.MixedCollection(false,function(E){return E.name});B.addAll(C);if(typeof D!="undefined"){D.prototype.fields.each(function(E){if(typeof B.get(E.name)=="undefined"){B.add(E)}})}return B.items},setupNames:function(B){var D=B.prototype,C=ExtMVC.Inflector;Ext.applyIf(B.prototype,{tableName:C.pluralize(D.modelName.underscore()),foreignKeyName:C.singularize(D.modelName.underscore())+"_id",singularHumanName:D.modelName.humanize().titleize(),pluralHumanName:C.pluralize(D.modelName.humanize().titleize())})},plugins:[],addPlugin:function(B){this.plugins.push(B)},initializePlugins:function(B){Ext.each(this.plugins,function(C){C.initialize(B)},this)}}}();Ext.ns("ExtMVC.Model.plugin");ExtMVC.Model.Base=function(){};ExtMVC.Model.Base.prototype={primaryKey:"id",newRecord:function(){var B=this.get(this.primaryKey);return typeof B=="undefined"||B==""},MVCModelId:function(){return String.format("{0}-{1}",this.tableName,this.get(this.primaryKey))},getReader:function(){if(!this.reader){this.reader=new Ext.data.JsonReader({totalProperty:"results",root:this.tableName},this.constructor)}return this.reader},initialize:Ext.emptyFn};Ext.apply(Ext.data.Record.prototype,new ExtMVC.Model.Base());ExtMVC.Model.plugin.association={initialize:function(B){var C=B.prototype,D=ExtMVC.Model.plugin.association;this.resolveDependencies(B);if(C.hasMany){Ext.each(this.parseParams(C.hasMany,"HasMany"),function(E){this.define(D.HasMany,B,E)},this)}if(C.belongsTo){Ext.each(this.parseParams(C.belongsTo,"BelongsTo"),function(E){this.define(D.BelongsTo,B,E)},this)}},dependencies:new ExtMVC.lib.Dependencies(),define:function(F,D,G){var E=ExtMVC.Model.modelNamespace,C=G.associatedClass,B=D.prototype.modelName;if(typeof E[C]=="function"){this.create.call(this,F,B,G)}else{G.associationConstructor=F;this.dependencies.add(C,B,G)}},create:function(F,C,G){var E=ExtMVC.Model.modelNamespace,D=E[C],H=E[G.associatedClass],B=G.associationName;D.prototype[B]=new F(D,H,G)},resolveDependencies:function(B){var C=this.dependencies.get(B.prototype.modelName);Ext.each(C||[],function(E){var D=E.config.associationConstructor;delete E.config.associationConstructor;this.create(D,E.name,E.config)},this)},parseParams:function(F,C){var D=[],C=C||"BelongsTo",B=C=="BelongsTo"?"singularize":"pluralize";if(Ext.isArray(F)){Ext.each(F,function(H){D.concat(this.parseParams(H))},this);return D}else{if(typeof F=="string"){F={associatedClass:F}}var G=F.associatedClass,E=typeof G=="function"?ExtMVC.Inflector[B](G.prototype.modelName):ExtMVC.Inflector[B](G);Ext.applyIf(F,{extend:{},associationName:E});D.push(F)}return D}};var A=ExtMVC.Model.plugin.association;ExtMVC.Model.plugin.association.Base=function(B,D,C){C=C||{};this.ownerClass=B;this.associatedClass=D;Ext.apply(this,C.extend||{});this.initialConfig=C;this.initialize()};ExtMVC.Model.plugin.association.Base.prototype={initialize:Ext.emptyFn};ExtMVC.Model.plugin.association.BelongsTo=Ext.extend(ExtMVC.Model.plugin.association.Base,{initialize:function(){Ext.apply(this,{name:ExtMVC.Inflector.singularize(this.associatedClass.prototype.tableName),foreignKey:this.associatedClass.prototype.foreignKeyName})}});ExtMVC.Model.plugin.association.HasMany=Ext.extend(ExtMVC.Model.plugin.association.Base,{initialize:function(){Ext.apply(this,{name:this.associatedClass.prototype.tableName,foreignKey:this.ownerClass.prototype.foreignKeyName})}});ExtMVC.Model.addPlugin(ExtMVC.Model.plugin.association);ExtMVC.Model.plugin.adapter=(function(){return{initialize:function(C){var B=new this.RESTJSONAdapter();Ext.override(Ext.data.Record,B.instanceMethods());Ext.apply(C,B.classMethods());try{Ext.override(ExtMVC.Model.plugin.association.HasMany,B.hasManyAssociationMethods());Ext.override(ExtMVC.Model.plugin.association.BelongsTo,B.belongsToAssociationMethods())}catch(D){}}}})();ExtMVC.Model.addPlugin(ExtMVC.Model.plugin.adapter);ExtMVC.Model.plugin.adapter.Abstract=function(B){};ExtMVC.Model.plugin.adapter.Abstract.prototype={doSave:Ext.emptyFn,doFind:Ext.emptyFn,doDestroy:Ext.emptyFn,instanceMethods:function(){return{adapter:this,save:function(B){B=B||{};if(B.skipValidation===true||this.isValid()){return this.adapter.doSave(this,B)}else{if(typeof B.failure=="function"){return B.failure.call(B.scope||this,this)}}},destroy:function(B){return this.adapter.doDestroy(this,B)},update:function(C,B){this.setValues(C);this.save(B)},loaded:function(){}}},classMethods:function(){return{adapter:this,create:function(D,C){var B=new this(D);B.save(C);return B},build:function(B){return new this(B)},find:function(C,B){if(typeof(C)=="number"){C={primaryKey:C}}return this.adapter.doFind(C,B,this)},destroy:function(C,B){return this.adapter.doDestroy(C,B)}}},hasManyAssociationMethods:function(){return{adapter:this,create:function(D,C){var B=new this.associatedClass(D)},build:function(C,B){},find:function(B){},loaded:function(){},destroy:function(B){}}},belongsToAssociationMethods:function(){return{adapter:this,find:function(B){},loaded:function(){},destroy:function(B){}}}};ExtMVC.Model.plugin.adapter.RESTAdapter=Ext.extend(ExtMVC.Model.plugin.adapter.Abstract,{createMethod:"POST",readMethod:"GET",updateMethod:"PUT",destroyMethod:"DELETE",proxyType:Ext.data.HttpProxy,doSave:function(C,E){if(typeof C=="undefined"){throw new Error("No instance provided to REST Adapter save")}E=E||{};var B=E.success||Ext.emptyFn,D=E.failure||Ext.emptyFn;delete E.success;delete E.failure;Ext.Ajax.request(Ext.apply({url:this.instanceUrl(C),method:C.newRecord()?this.createMethod:this.updateMethod,params:this.buildPostData(C),success:function(F,G,H){H=H||this;return function(I,J){var M=F.modelName.underscore(),L=Ext.decode(I.responseText)[M];for(var K in L){F.set(K,L[K])}G.call(this,F)}}(C,B,E.scope)},E))},afterSave:function(){},doFind:function(F,C,D){F=F||{};C=C||{};var G=(F.primaryKey!==undefined),B=C.url||this.findUrl(F,D);Ext.applyIf(C,{conditions:F,scope:this});var E=G?this.doSingleFind:this.doCollectionFind;return E.call(this,B,C,D)},doDestroy:function(B,C){if(typeof B=="undefined"){throw new Error("No instance provided to REST Adapter destroy")}return Ext.Ajax.request(Ext.applyIf(C||{},{method:this.destroyMethod,url:this.instanceUrl(B)}))},doSingleFind:function(E,D,G){var I=D.callback,B=D.success,H=D.failure;delete D.callback;delete D.success;delete D.failure;var F=this.decodeSingleLoadResponse;var C=function(K,J){if(typeof K=="function"){K.apply(D.scope,J)}};Ext.Ajax.request(Ext.apply(D,{callback:function(L,M,K){if(M===true){var J=new G(F(K.responseText,G));C(B,[J,L,K])}else{C(H,arguments)}C(I,arguments)}},this.buildProxyConfig(E)))},storeConfig:{autoLoad:true,remoteSort:false},doCollectionFind:function(C,B,D){Ext.applyIf(B,this.storeConfig);if(B.conditions!=undefined){Ext.applyIf(B,{baseParams:B.conditions})}return new Ext.data.Store(Ext.applyIf(B,{reader:D.prototype.getReader(),proxy:new this.proxyType(this.buildProxyConfig(C))}))},instanceUrl:function(B){if(B.newRecord()){return String.format("/{0}",B.tableName)}else{return String.format("/{0}/{1}",B.tableName,B.get(B.primaryKey))}},collectionUrl:function(B){return String.format("/{0}",B.prototype.tableName)},buildProxyConfig:function(B){return{url:B,method:this.readMethod}},buildPostData:function(B){var D={},C=B.modelName.underscore();for(key in B.data){D[C+"["+key+"]"]=B.data[key]}return D},decodeSingleLoadResponse:function(D,B){var C=B.prototype.tableName;return Ext.decode(D)[C]},findUrl:function(D,C){if(typeof(D)=="object"&&D.primaryKey){var B=new C({});B.set(B.primaryKey,D.primaryKey);delete D.primaryKey;return this.instanceUrl(B)}else{return this.collectionUrl(C)}}});ExtMVC.Model.plugin.adapter.RESTJSONAdapter=Ext.extend(ExtMVC.Model.plugin.adapter.RESTAdapter,{doSave:function(B,C){if(typeof B=="undefined"){throw new Error("No instance provided to REST Adapter save")}Ext.applyIf(C||{},{jsonData:B.data,params:{},headers:{"Content-Type":"application/json"}});ExtMVC.Model.plugin.adapter.RESTJSONAdapter.superclass.doSave.apply(this,arguments)},decodeSingleLoadResponse:function(D,B){var C=ExtMVC.Inflector.singularize(B.prototype.tableName);return Ext.decode(D)[C]},buildProxyConfig:function(B){var C=ExtMVC.Model.plugin.adapter.RESTJSONAdapter.superclass.buildProxyConfig.apply(this,arguments);return Ext.apply(C,{headers:{"Content-Type":"application/json"}})}});ExtMVC.Model.plugin.validation.AbstractValidation=function(B,D,C){this.ownerClass=B;this.field=D;Ext.apply(this,C)};ExtMVC.Model.plugin.validation.AbstractValidation.prototype={getValue:function(B){return B.get(this.field)},isValid:function(B){return true}};ExtMVC.Model.plugin.validation.ValidatesPresenceOf=Ext.extend(ExtMVC.Model.plugin.validation.AbstractValidation,{message:"must be present",isValid:function(B){var D=this.getValue(B),C=false;switch(typeof D){case"object":if(D!=null){C=true}break;case"string":if(D.length!=0){C=true}break}return C}});ExtMVC.Model.plugin.validation.ValidatesLengthOf=Ext.extend(ExtMVC.Model.plugin.validation.AbstractValidation,{tooShortMessage:"is too short",tooLongMessage:"is too long",message:"",isValid:function(B){var C=this.getValue(B);if(typeof C=="undefined"){return true}if(this.minimum&&C.length<this.minimum){this.message=this.tooShortMessage;return false}if(this.maximum&C.length>this.maximum){this.message=this.tooLongMessage;return false}return true}});ExtMVC.Model.plugin.validation.ValidatesNumericalityOf=Ext.extend(ExtMVC.Model.plugin.validation.AbstractValidation,{message:"must be a number",isValid:function(B){return"number"==typeof this.getValue(B)}});ExtMVC.Model.plugin.validation.ValidatesInclusionOf=Ext.extend(ExtMVC.Model.plugin.validation.AbstractValidation,{constructor:function(B,D,C){C=C||{};Ext.applyIf(C,{allowed:[]});ExtMVC.Model.plugin.validation.ValidatesInclusionOf.superclass.constructor.call(this,B,D,C);Ext.applyIf(this,{message:"must be one of "+this.allowed.toSentence("or")})},isValid:function(B){var D=this.getValue(B);for(var C=0;C<this.allowed.length;C++){if(this.allowed[C]==D){return true}}return false}});ExtMVC.Model.plugin.validation.ValidatesExclusionOf=Ext.extend(ExtMVC.Model.plugin.validation.AbstractValidation,{constructor:function(B,D,C){C=C||{};Ext.applyIf(C,{disallowed:[]});ExtMVC.Model.plugin.validation.ValidatesExclusionOf.superclass.constructor.call(this,B,D,C);Ext.applyIf(this,{message:"must not be "+this.disallowed.toSentence("or")})},isValid:function(B){var E=this.getValue(B),D=true;for(var C=0;C<this.disallowed.length;C++){if(this.disallowed[C]==E){D=false}}return D}});ExtMVC.Model.plugin.validation.ValidatesFormatOf=Ext.extend(ExtMVC.Model.plugin.validation.AbstractValidation,{message:"is invalid",isValid:function(B){return this.regex.test(this.getValue(B))}});ExtMVC.Model.plugin.validation.Errors=function(){this.all={}};ExtMVC.Model.plugin.validation.Errors.prototype={forForm:function(){var B={};for(key in this.all){B[key]=this.forField(key,true)}return B},multipleErrorConnector:"and",clear:function(){this.all={}},add:function(C,B){this.all[C]=this.all[C]||[];this.all[C].push(B)},forField:function(D,C){C=C||false;var B=this.all[D]||[];return C?B.toSentence(this.multipleErrorConnector):B},isValid:function(B){for(key in this.all){return false}return true},readServerErrors:function(B,D){var B=B||{};if(D!==true){this.clearErrors()}if(typeof(B)=="string"){B=Ext.decode(B)}var E=B.errors;if(E){for(var C=0;C<E.length;C++){this.all.push(E[C])}}}};Ext.apply(Ext.data.Record.prototype,{isValid:function(){if(this.validations){if(!this.errors){this.errors=new ExtMVC.Model.plugin.validations.Errors()}this.errors.clear();Ext.each(this.validations,function(B){if(!B.isValid(this)){this.errors.add(B.field,B.message)}},this)}return this.errors.isValid()}});(function(){var E=Ext.data.Record.prototype,B=Ext.data.Record,D={};for(var C in Ext.data.Record){D[C]=Ext.data.Record[C]}Ext.data.Record=function(F,G){B.apply(this,arguments);this.errors=new ExtMVC.Model.plugin.validation.Errors()};for(var C in D){Ext.data.Record[C]=D[C]}})();ExtMVC.Model.plugin.validation.Plugin={initialize:function(B){this.model=B;Ext.apply(B.prototype,{validations:this.parseValidations()})},parseValidations:function(){var D=[];for(var C in ExtMVC.Model.plugin.validation){if(/^validate/.test(C.toLowerCase())){for(var E in this.model.prototype){if(E.toLowerCase()==C.toLowerCase()){var F=ExtMVC.Model.plugin.validation[C],B=this.model.prototype[E];if(!Ext.isArray(B)){B=[B]}Ext.each(B,function(G){D.push(this.buildValidation(F,G))},this)}}}}return D},buildValidation:function(B,D){var E,C={};if("string"==typeof D){E=D}else{E=D.field;delete D.field;C=D}return new B(this.model,E,C)}};ExtMVC.Model.addPlugin(ExtMVC.Model.plugin.validation.Plugin);ExtMVC.ViewportBuilderManager={viewportBuilders:{},register:function(B,C){this.viewportBuilders[B]=C},find:function(C,B){var D=this.viewportBuilders[C];if(D){return new D(B)}}};ExtMVC.ViewportBuilder=function(B){this.initialConfig=B};ExtMVC.ViewportBuilder.prototype={build:Ext.emptyFn};ExtMVC.view.scaffold.ScaffoldFormPanel=Ext.extend(Ext.form.FormPanel,{autoScroll:true,constructor:function(B){var B=B||{};this.model=B.model;if(this.model==undefined){throw new Error("No model supplied to scaffold Form view")}ExtMVC.view.scaffold.ScaffoldFormPanel.superclass.constructor.call(this,B)},initComponent:function(){Ext.applyIf(this,{items:this.buildItems(),keys:[{key:Ext.EventObject.ESC,scope:this,handler:this.onCancel},{key:"s",ctrl:true,scope:this,stopEvent:true,handler:this.onSave}]});if(!Ext.isArray(this.buttons)){Ext.apply(this,{buttons:this.buildButtons()})}ExtMVC.view.scaffold.ScaffoldFormPanel.superclass.initComponent.apply(this,arguments);this.initEvents();this.initListeners()},initListeners:function(){if(this.controller){this.controller.on({scope:this,"create-failed":this.showErrorsFromInstance,"update-failed":this.showErrorsFromInstance})}},showErrorsFromInstance:function(B){this.getForm().markInvalid(B.errors.forForm())},initEvents:function(){this.addEvents("save","cancel")},formItemConfig:{anchor:"-40",xtype:"textfield"},ignoreFields:["id","created_at","updated_at"],buildButtons:function(){return[{text:"Save",scope:this,iconCls:"save",handler:this.onSave},{text:"Cancel",scope:this,iconCls:"cancel",handler:this.onCancel}]},buildItems:function(){items=[];if(this.viewsPackage&&this.viewsPackage.FormFields){items=this.viewsPackage.FormFields}else{var C=this.model,E=C.prototype,B=E.fields;B.each(function(F){if(this.ignoreFields.indexOf(F.name)==-1){items.push(Ext.applyIf({name:F.name,fieldLabel:(F.name.replace(/_/g," ")).capitalize()}))}},this)}for(var D=0;D<items.length;D++){if(items[D].layout===undefined){Ext.applyIf(items[D],this.formItemConfig)}}return items},onSave:function(){this.fireEvent("save",this.getForm().getValues())},onCancel:function(){this.fireEvent("cancel",this.instance)}});Ext.reg("scaffold_form_panel",ExtMVC.view.scaffold.ScaffoldFormPanel);ExtMVC.view.scaffold.Index=Ext.extend(Ext.grid.GridPanel,{constructor:function(B){B=B||{};this.model=B.model;if(this.model==undefined){throw new Error("No model supplied to scaffold Index view")}this.controller=this.controller||B.controller;if(B.columns==undefined&&B.colModel==undefined&&B.cm==undefined){B.columns=this.buildColumns(this.model)}B.store=B.store||this.model.find();var C=this.hasTopToolbar?this.buildTopToolbar():null;var D=this.hasBottomToolbar?this.buildBottomToolbar(B.store):null;Ext.applyIf(B,{title:this.getTitle(),viewConfig:{forceFit:true},id:String.format("{0}_index",this.model.prototype.tableName),loadMask:true,tbar:C,bbar:D,keys:[{key:"a",scope:this,handler:this.onAdd},{key:"e",scope:this,handler:this.onEdit},{key:Ext.EventObject.DELETE,scope:this,handler:this.onDelete}]});ExtMVC.view.scaffold.Index.superclass.constructor.call(this,B);this.initEvents();this.initListeners()},initEvents:function(){this.addEvents("edit","new","delete")},initListeners:function(){this.on({scope:this,dblclick:this.onEdit});if(this.controller!=undefined){this.controller.on("delete",this.refreshStore,this)}},destroy:function(){if(this.controller!=undefined){this.controller.un("delete",this.refreshStore,this)}ExtMVC.view.scaffold.Index.superclass.destroy.apply(this,arguments)},refreshStore:function(){var B=Ext.getCmp(this.id).store;B.reload()},getTitle:function(){return String.format("Showing {0}",this.model.prototype.pluralHumanName)},preferredColumns:["id","title","name","first_name","last_name","login","username","email","email_address","content","message","body"],ignoreColumns:["password","password_confirmation"],useColumns:undefined,narrowColumns:["id"],wideColumns:["message","content","description","bio","body"],narrowColumnWidth:30,normalColumnWidth:100,wideColumnWidth:200,hasTopToolbar:true,hasBottomToolbar:true,buildColumns:function(D){if(this.viewsPackage&&this.viewsPackage.GridColumns){var F=this.viewsPackage.GridColumns}else{var B=this.getFields(),F=[];wideColumns=[];Ext.each(B,function(G){if(this.preferredColumns.indexOf(G.name)>-1){F.push(this.buildColumn(G.name))}},this);Ext.each(B,function(G){if(this.preferredColumns.indexOf(G.name)==-1&&this.ignoreColumns.indexOf(G.name)==-1){F.push(this.buildColumn(G.name))}if(this.wideColumns.indexOf(G.name)){wideColumns.push(G.name)}},this);for(var E=F.length-1;E>=0;E--){var C=F[E];if(this.narrowColumns.indexOf(C.id)>-1){Ext.applyIf(C,{width:this.narrowColumnWidth})}else{if(this.wideColumns.indexOf(C.id)>-1){Ext.applyIf(C,{width:this.wideColumnWidth})}else{Ext.applyIf(C,{width:this.normalColumnWidth})}}}}return F},getFields:function(){if(this.useColumns===undefined){return this.model.prototype.fields.items}else{var B=[];Ext.each(this.useColumns,function(C){B.push({name:C})},this);return B}},buildColumn:function(B){var B=B||{};if(typeof(B)=="string"){B={name:B}}return Ext.applyIf(B,{id:B.name,header:B.name.replace(/_/g," ").titleize(),sortable:true,dataIndex:B.name})},hasAddButton:true,hasEditButton:true,hasDeleteButton:true,buildAddButton:function(B){return new Ext.Button(Ext.applyIf(B||{},{text:"New "+this.model.prototype.singularHumanName,scope:this,iconCls:"add",handler:this.onAdd}))},buildEditButton:function(B){return new Ext.Button(Ext.applyIf(B||{},{text:"Edit selected",scope:this,iconCls:"edit",disabled:true,handler:this.onEdit}))},buildDeleteButton:function(B){return new Ext.Button(Ext.applyIf(B||{},{text:"Delete selected",disabled:true,scope:this,iconCls:"delete",handler:this.onDelete}))},buildTopToolbar:function(){var B=[];if(this.hasAddButton===true){this.addButton=this.buildAddButton();B.push(this.addButton,"-")}if(this.hasEditButton===true){this.editButton=this.buildEditButton();B.push(this.editButton,"-")}if(this.hasDeleteButton===true){this.deleteButton=this.buildDeleteButton();B.push(this.deleteButton,"-")}if(this.hasSearchField===true){this.searchField=this.buildSearchField();B.push(this.searchField,"-")}this.getSelectionModel().on("selectionchange",function(C){if(C.getCount()>0){if(this.deleteButton!=undefined){this.deleteButton.enable()}if(this.editButton!=undefined){this.editButton.enable()}}else{if(this.deleteButton!=undefined){this.deleteButton.disable()}if(this.editButton!=undefined){this.editButton.disable()}}},this);return B},pageSize:25,buildBottomToolbar:function(B){return new Ext.PagingToolbar({store:B,displayInfo:true,pageSize:this.pageSize,emptyMsg:String.format("No {0} to display",this.model.prototype.pluralHumanName)})},hasSearchField:false,searchParamName:"q",buildSearchField:function(){this.searchField=new Ext.form.TwinTriggerField({width:200,validationEvent:false,validateOnBlur:false,hideTrigger1:true,onTrigger1Click:this.clearSearchField.createDelegate(this,[]),onTrigger2Click:this.onSearch.createDelegate(this,[]),trigger1Class:"x-form-clear-trigger",trigger2Class:"x-form-search-trigger"});this.searchField.on("specialkey",function(C,B){if(B.getKey()===B.ESC){this.clearSearchField()}B.stopEvent();if(B.getKey()===B.ENTER){this.onSearch()}},this);return this.searchField},clearSearchField:function(){var B=this.searchField;B.el.dom.value="";B.triggers[0].hide();this.doSearch()},onSearch:function(){var C=this.searchField,B=C.getRawValue();if(B.length<1){this.clearSearchField()}else{C.triggers[0].show();this.doSearch(B)}},doSearch:function(B){B=B||this.searchField.getRawValue()||"";var C={start:0};this.store.baseParams=this.store.baseParams||{};this.store.baseParams[this.searchParamName]=B;this.store.reload({params:C})},onAdd:function(){this.fireEvent("new")},onEdit:function(C){var B=this.getSelectionModel().getSelected();if(B){this.fireEvent("edit",B)}},onDelete:function(){Ext.Msg.confirm("Are you sure?",String.format("Are you sure you want to delete this {0}?  This cannot be undone.",this.model.prototype.modelName.titleize()),function(B){if(B=="yes"){var C=this.getSelectionModel().getSelected();if(C){this.fireEvent("delete",C)}}},this)}});Ext.reg("scaffold_index",ExtMVC.view.scaffold.Index);ExtMVC.view.scaffold.New=Ext.extend(ExtMVC.view.scaffold.ScaffoldFormPanel,{initComponent:function(){Ext.applyIf(this,{title:"New "+this.model.prototype.singularHumanName});ExtMVC.view.scaffold.New.superclass.initComponent.apply(this,arguments)}});Ext.reg("scaffold_new",ExtMVC.view.scaffold.New);ExtMVC.view.scaffold.Edit=Ext.extend(ExtMVC.view.scaffold.ScaffoldFormPanel,{initComponent:function(){Ext.applyIf(this,{title:"Edit "+this.model.prototype.singularHumanName});ExtMVC.view.scaffold.Edit.superclass.initComponent.apply(this,arguments)},loadRecord:function(B){this.instance=B;this.getForm().loadRecord(B)},onSave:function(){this.fireEvent("save",this.instance,this.getForm().getValues())}});Ext.reg("scaffold_edit",ExtMVC.view.scaffold.Edit);ExtMVC.view.HasManyEditorGridPanel=Ext.extend(Ext.grid.EditorGridPanel,{initComponent:function(){Ext.applyIf(this,{autoScroll:true,store:this.association.findAll(),viewConfig:{forceFit:true}});if(this.hasTopToolbar){this.addTopToolbar()}ExtMVC.view.HasManyEditorGridPanel.superclass.initComponent.apply(this,arguments);this.on("afteredit",function(B){B.record.save({success:function(){B.record.commit()}})},this);this.getSelectionModel().on("selectionchange",function(B,C){if(this.deleteButton){this.deleteButton.enable()}},this)},hasTopToolbar:true,hasNewButton:true,hasDeleteButton:true,addTopToolbar:function(C){var B=[];if(this.hasNewButton){this.newButton=new Ext.Toolbar.Button({iconCls:"add",text:"Add",scope:this,handler:this.onAdd});B.push(this.newButton);B.push("-")}if(this.hasDeleteButton){this.deleteButton=new Ext.Toolbar.Button({text:"Remove selected",disabled:true,iconCls:"delete",scope:this,handler:this.onDelete});B.push(this.deleteButton)}Ext.applyIf(this,{tbar:B})},windowConfig:{},onAdd:function(B){if(!this.addWindow){this.addWindow=new Ext.Window(Ext.applyIf(this.windowConfig,{title:"New",layout:"fit",modal:true,height:300,width:400,items:[this.form],closeAction:"hide",buttons:[{text:"Save",iconCls:"save",scope:this,handler:this.onSaveNew},{text:"Cancel",iconCls:"cancel",scope:this,handler:this.onCancelNew}]}))}this.addWindow.show()},onDelete:function(C){var B=this.getSelectionModel().selection.record;if(B){B.destroy({scope:this,success:function(){this.store.reload()},failure:function(){Ext.Msg.alert("Delete failed","Something went wrong while trying to delete - please try again");this.store.reload()}})}this.deleteButton.disable()},onSaveNew:function(){this.association.create(this.form.getForm().getValues(),{scope:this,success:function(C,B){this.store.reload();this.addWindow.hide()},failure:function(C,B){this.form.getForm().clearInvalid();this.form.getForm().markInvalid(C.errors.forForm())}})},onCancelNew:function(B){this.addWindow.hide()}});Ext.reg("hasmany_editorgrid",ExtMVC.view.HasManyEditorGridPanel);